{"ast":null,"code":"import { BehaviorSubject, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { STORAGE_KEYS } from '../shared/constants';\nimport * as i0 from \"@angular/core\";\nclass TaskService {\n  constructor() {\n    this.tasksSubject = new BehaviorSubject(this.loadFromStorage());\n    this.tasks$ = this.tasksSubject.asObservable();\n  }\n  loadFromStorage() {\n    try {\n      const raw = localStorage.getItem(STORAGE_KEYS.TASKS);\n      return raw ? JSON.parse(raw) : [];\n    } catch {\n      return [];\n    }\n  }\n  saveToStorage(tasks) {\n    localStorage.setItem(STORAGE_KEYS.TASKS, JSON.stringify(tasks));\n    this.tasksSubject.next(tasks);\n  }\n  generateId() {\n    return 'xxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n      const r = Math.random() * 16 | 0;\n      const v = c === 'x' ? r : r & 0x3 | 0x8;\n      return v.toString(16);\n    });\n  }\n  getAll() {\n    return this.tasks$.pipe(map(list => list));\n  }\n  getById(id) {\n    return this.tasks$.pipe(map(list => list.find(t => t.id === id)));\n  }\n  create(taskData) {\n    const tasks = [...this.tasksSubject.getValue()];\n    const now = new Date().toISOString();\n    const newTask = {\n      id: this.generateId(),\n      title: (taskData.title || '').trim(),\n      description: taskData.description || '',\n      completed: !!taskData.completed,\n      dueDate: taskData.dueDate,\n      createdAt: now,\n      updatedAt: now\n    };\n    tasks.unshift(newTask);\n    this.saveToStorage(tasks);\n    return of(newTask);\n  }\n  update(id, changes) {\n    const tasks = [...this.tasksSubject.getValue()];\n    const idx = tasks.findIndex(t => t.id === id);\n    if (idx === -1) {\n      return of(undefined);\n    }\n    const updated = {\n      ...tasks[idx],\n      ...changes,\n      updatedAt: new Date().toISOString()\n    };\n    tasks[idx] = updated;\n    this.saveToStorage(tasks);\n    return of(updated);\n  }\n  delete(id) {\n    const tasks = this.tasksSubject.getValue().filter(t => t.id !== id);\n    this.saveToStorage(tasks);\n    return of(true);\n  }\n  toggleComplete(id) {\n    const tasks = [...this.tasksSubject.getValue()];\n    const idx = tasks.findIndex(t => t.id === id);\n    if (idx === -1) return of(undefined);\n    tasks[idx] = {\n      ...tasks[idx],\n      completed: !tasks[idx].completed,\n      updatedAt: new Date().toISOString()\n    };\n    this.saveToStorage(tasks);\n    return of(tasks[idx]);\n  }\n  static {\n    this.ɵfac = function TaskService_Factory(t) {\n      return new (t || TaskService)();\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: TaskService,\n      factory: TaskService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}\nexport { TaskService };","map":{"version":3,"names":["BehaviorSubject","of","map","STORAGE_KEYS","TaskService","constructor","tasksSubject","loadFromStorage","tasks$","asObservable","raw","localStorage","getItem","TASKS","JSON","parse","saveToStorage","tasks","setItem","stringify","next","generateId","replace","c","r","Math","random","v","toString","getAll","pipe","list","getById","id","find","t","create","taskData","getValue","now","Date","toISOString","newTask","title","trim","description","completed","dueDate","createdAt","updatedAt","unshift","update","changes","idx","findIndex","undefined","updated","delete","filter","toggleComplete","factory","ɵfac","providedIn"],"sources":["E:\\TEJASWINI\\Angular To-Do-List\\ng-training-assignment-1\\src\\app\\services\\task.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject, Observable, of } from 'rxjs';\r\nimport { map, delay } from 'rxjs/operators';\r\nimport { Task } from '../models/task.model';\r\nimport { STORAGE_KEYS } from '../shared/constants';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TaskService {\r\n  private tasksSubject = new BehaviorSubject<Task[]>(this.loadFromStorage());\r\n  public tasks$ = this.tasksSubject.asObservable();\r\n\r\n  constructor() {}\r\n\r\n  private loadFromStorage(): Task[] {\r\n    try {\r\n      const raw = localStorage.getItem(STORAGE_KEYS.TASKS);\r\n      return raw ? JSON.parse(raw) : [];\r\n    } catch {\r\n      return [];\r\n    }\r\n  }\r\n\r\n  private saveToStorage(tasks: Task[]) {\r\n    localStorage.setItem(STORAGE_KEYS.TASKS, JSON.stringify(tasks));\r\n    this.tasksSubject.next(tasks);\r\n  }\r\n\r\n  private generateId(): string {\r\n    return 'xxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\r\n      const r = (Math.random() * 16) | 0;\r\n      const v = c === 'x' ? r : (r & 0x3) | 0x8;\r\n      return v.toString(16);\r\n    });\r\n  }\r\n\r\n\r\n  getAll(): Observable<Task[]> {\r\n    return this.tasks$.pipe(map(list => list));\r\n  }\r\n\r\n  getById(id: string): Observable<Task | undefined> {\r\n    return this.tasks$.pipe(map(list => list.find(t => t.id === id)));\r\n  }\r\n\r\n  create(taskData: Partial<Task>): Observable<Task> {\r\n    const tasks = [...this.tasksSubject.getValue()];\r\n    const now = new Date().toISOString();\r\n    const newTask: Task = {\r\n      id: this.generateId(),\r\n      title: (taskData.title || '').trim(),\r\n      description: taskData.description || '',\r\n      completed: !!taskData.completed,\r\n      dueDate: taskData.dueDate,\r\n      createdAt: now,\r\n      updatedAt: now\r\n    };\r\n    tasks.unshift(newTask);\r\n    this.saveToStorage(tasks);\r\n    return of(newTask);\r\n  }\r\n\r\n  update(id: string, changes: Partial<Task>): Observable<Task | undefined> {\r\n    const tasks = [...this.tasksSubject.getValue()];\r\n    const idx = tasks.findIndex(t => t.id === id);\r\n    if (idx === -1) {\r\n      return of(undefined);\r\n    }\r\n    const updated: Task = {\r\n      ...tasks[idx],\r\n      ...changes,\r\n      updatedAt: new Date().toISOString()\r\n    };\r\n    tasks[idx] = updated;\r\n    this.saveToStorage(tasks);\r\n    return of(updated);\r\n  }\r\n\r\n  delete(id: string): Observable<boolean> {\r\n    const tasks = this.tasksSubject.getValue().filter(t => t.id !== id);\r\n    this.saveToStorage(tasks);\r\n    return of(true);\r\n  }\r\n\r\n  toggleComplete(id: string): Observable<Task | undefined> {\r\n    const tasks = [...this.tasksSubject.getValue()];\r\n    const idx = tasks.findIndex(t => t.id === id);\r\n    if (idx === -1) return of(undefined);\r\n    tasks[idx] = {\r\n      ...tasks[idx],\r\n      completed: !tasks[idx].completed,\r\n      updatedAt: new Date().toISOString()\r\n    };\r\n    this.saveToStorage(tasks);\r\n    return of(tasks[idx]);\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}