{"ast":null,"code":"import { BehaviorSubject, of } from 'rxjs';\nimport { map, delay } from 'rxjs/operators';\nimport { STORAGE_KEYS } from '../shared/constants';\nimport * as i0 from \"@angular/core\";\nclass TaskService {\n  constructor() {\n    this.tasksSubject = new BehaviorSubject(this.loadFromStorage());\n    this.tasks$ = this.tasksSubject.asObservable();\n  }\n  // simple lists used by form selects (mocked)\n  getUsers() {\n    return of(['User 1', 'User 2', 'User 3', 'User 4']).pipe(delay(100));\n  }\n  getStatuses() {\n    return of(['Not Started', 'In Progress', 'Completed']).pipe(delay(50));\n  }\n  getPriorities() {\n    return of(['Low', 'Normal', 'High']).pipe(delay(50));\n  }\n  loadFromStorage() {\n    try {\n      const raw = localStorage.getItem(STORAGE_KEYS.TASKS);\n      return raw ? JSON.parse(raw) : [];\n    } catch {\n      return [];\n    }\n  }\n  saveToStorage(tasks) {\n    localStorage.setItem(STORAGE_KEYS.TASKS, JSON.stringify(tasks));\n    this.tasksSubject.next(tasks);\n  }\n  generateId() {\n    return 'xxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n      const r = Math.random() * 16 | 0;\n      const v = c === 'x' ? r : r & 0x3 | 0x8;\n      return v.toString(16);\n    });\n  }\n  getAll() {\n    return this.tasks$.pipe(map(list => list));\n  }\n  getById(id) {\n    return this.tasks$.pipe(map(list => list.find(t => t.id === id)));\n  }\n  create(taskData) {\n    const tasks = [...this.tasksSubject.getValue()];\n    const now = new Date().toISOString();\n    const newTask = {\n      id: this.generateId(),\n      description: taskData.description || '',\n      dueDate: taskData.dueDate,\n      assignedTo: taskData.assignedTo,\n      status: taskData.status || 'Not Started',\n      priority: taskData.priority || 'Normal',\n      comments: taskData.comments || '',\n      createdAt: now,\n      updatedAt: now\n    };\n    tasks.unshift(newTask);\n    this.saveToStorage(tasks);\n    return of(newTask);\n  }\n  update(id, changes) {\n    const tasks = [...this.tasksSubject.getValue()];\n    const idx = tasks.findIndex(t => t.id === id);\n    if (idx === -1) {\n      return of(undefined);\n    }\n    const updated = {\n      ...tasks[idx],\n      ...changes,\n      updatedAt: new Date().toISOString()\n    };\n    tasks[idx] = updated;\n    this.saveToStorage(tasks);\n    return of(updated);\n  }\n  delete(id) {\n    const tasks = this.tasksSubject.getValue().filter(t => t.id !== id);\n    this.saveToStorage(tasks);\n    return of(true);\n  }\n  toggleComplete(id) {\n    const tasks = [...this.tasksSubject.getValue()];\n    const idx = tasks.findIndex(t => t.id === id);\n    if (idx === -1) return of(undefined);\n    tasks[idx] = {\n      ...tasks[idx],\n      updatedAt: new Date().toISOString()\n    };\n    this.saveToStorage(tasks);\n    return of(tasks[idx]);\n  }\n  static {\n    this.ɵfac = function TaskService_Factory(t) {\n      return new (t || TaskService)();\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: TaskService,\n      factory: TaskService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}\nexport { TaskService };","map":{"version":3,"names":["BehaviorSubject","of","map","delay","STORAGE_KEYS","TaskService","constructor","tasksSubject","loadFromStorage","tasks$","asObservable","getUsers","pipe","getStatuses","getPriorities","raw","localStorage","getItem","TASKS","JSON","parse","saveToStorage","tasks","setItem","stringify","next","generateId","replace","c","r","Math","random","v","toString","getAll","list","getById","id","find","t","create","taskData","getValue","now","Date","toISOString","newTask","description","dueDate","assignedTo","status","priority","comments","createdAt","updatedAt","unshift","update","changes","idx","findIndex","undefined","updated","delete","filter","toggleComplete","factory","ɵfac","providedIn"],"sources":["E:\\TEJASWINI\\Angular To-Do-List\\ng-training-assignment-1\\src\\app\\services\\task.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject, Observable, of } from 'rxjs';\r\nimport { map, delay } from 'rxjs/operators';\r\nimport { Task } from '../models/task.model';\r\nimport { STORAGE_KEYS } from '../shared/constants';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TaskService {\r\n  private tasksSubject = new BehaviorSubject<Task[]>(this.loadFromStorage());\r\n  public tasks$ = this.tasksSubject.asObservable();\r\n\r\n  constructor() {}\r\n\r\n  // simple lists used by form selects (mocked)\r\n  getUsers(): Observable<string[]> {\r\n    return of(['User 1', 'User 2', 'User 3', 'User 4']).pipe(delay(100));\r\n  }\r\n\r\n  getStatuses(): Observable<string[]> {\r\n    return of(['Not Started', 'In Progress', 'Completed']).pipe(delay(50));\r\n  }\r\n\r\n  getPriorities(): Observable<string[]> {\r\n    return of(['Low', 'Normal', 'High']).pipe(delay(50));\r\n  }\r\n\r\n  private loadFromStorage(): Task[] {\r\n    try {\r\n      const raw = localStorage.getItem(STORAGE_KEYS.TASKS);\r\n      return raw ? JSON.parse(raw) : [];\r\n    } catch {\r\n      return [];\r\n    }\r\n  }\r\n\r\n  private saveToStorage(tasks: Task[]) {\r\n    localStorage.setItem(STORAGE_KEYS.TASKS, JSON.stringify(tasks));\r\n    this.tasksSubject.next(tasks);\r\n  }\r\n\r\n  private generateId(): string {\r\n    return 'xxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\r\n      const r = (Math.random() * 16) | 0;\r\n      const v = c === 'x' ? r : (r & 0x3) | 0x8;\r\n      return v.toString(16);\r\n    });\r\n  }\r\n\r\n\r\n  getAll(): Observable<Task[]> {\r\n    return this.tasks$.pipe(map(list => list));\r\n  }\r\n\r\n  getById(id: string): Observable<Task | undefined> {\r\n    return this.tasks$.pipe(map(list => list.find(t => t.id === id)));\r\n  }\r\n\r\n  create(taskData: Partial<Task>): Observable<Task> {\r\n    const tasks = [...this.tasksSubject.getValue()];\r\n    const now = new Date().toISOString();\r\n    const newTask: Task = {\r\n      id: this.generateId(),\r\n      description: taskData.description || '',\r\n      dueDate: taskData.dueDate,\r\n      assignedTo: taskData.assignedTo,\r\n      status: taskData.status || 'Not Started',\r\n      priority: taskData.priority || 'Normal',\r\n      comments: taskData.comments || '',\r\n      createdAt: now,\r\n      updatedAt: now\r\n    };\r\n    tasks.unshift(newTask);\r\n    this.saveToStorage(tasks);\r\n    return of(newTask);\r\n  }\r\n\r\n  update(id: string, changes: Partial<Task>): Observable<Task | undefined> {\r\n    const tasks = [...this.tasksSubject.getValue()];\r\n    const idx = tasks.findIndex(t => t.id === id);\r\n    if (idx === -1) {\r\n      return of(undefined);\r\n    }\r\n    const updated: Task = {\r\n      ...tasks[idx],\r\n      ...changes,\r\n      updatedAt: new Date().toISOString()\r\n    };\r\n    tasks[idx] = updated;\r\n    this.saveToStorage(tasks);\r\n    return of(updated);\r\n  }\r\n\r\n  delete(id: string): Observable<boolean> {\r\n    const tasks = this.tasksSubject.getValue().filter(t => t.id !== id);\r\n    this.saveToStorage(tasks);\r\n    return of(true);\r\n  }\r\n\r\n  toggleComplete(id: string): Observable<Task | undefined> {\r\n    const tasks = [...this.tasksSubject.getValue()];\r\n    const idx = tasks.findIndex(t => t.id === id);\r\n    if (idx === -1) return of(undefined);\r\n    tasks[idx] = {\r\n      ...tasks[idx],\r\n      updatedAt: new Date().toISOString()\r\n    };\r\n    this.saveToStorage(tasks);\r\n    return of(tasks[idx]);\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}