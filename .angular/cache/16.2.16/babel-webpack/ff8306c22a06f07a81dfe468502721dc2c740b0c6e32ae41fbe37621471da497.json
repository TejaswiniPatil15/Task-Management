{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet TaskListComponent = class TaskListComponent {\n  constructor(taskService, router) {\n    this.taskService = taskService;\n    this.router = router;\n    this.tasks = [];\n    // UI state\n    this.searchTerm = '';\n    this.page = 1;\n    this.pageSize = 20;\n    this.showFormModal = false;\n    this.selectedTask = null;\n    this.showDeleteConfirm = false;\n    this.taskToDelete = null;\n    // track which row's action menu is open (task id)\n    this.openMenuTaskId = null;\n    this.clickListener = null;\n  }\n  ngOnInit() {\n    this.subscription = this.taskService.getAll().subscribe(list => {\n      this.tasks = list;\n      if (this.page > this.totalPages) this.page = this.totalPages || 1;\n    });\n  }\n  ngOnDestroy() {\n    this.subscription?.unsubscribe();\n    this.removeClickListener();\n  }\n  openNew() {\n    this.selectedTask = null;\n    this.showFormModal = true;\n  }\n  openEdit(task) {\n    this.selectedTask = task;\n    this.showFormModal = true;\n    this.openMenuTaskId = null;\n  }\n  onSaved(task) {\n    this.showFormModal = false;\n    this.selectedTask = null;\n  }\n  onClosed() {\n    this.showFormModal = false;\n    this.selectedTask = null;\n  }\n  openDeleteConfirm(task) {\n    this.selectedTask = task;\n    this.showDeleteConfirm = true;\n    this.openMenuTaskId = null;\n  }\n  toggleRowMenu(id) {\n    if (this.openMenuTaskId === id) {\n      this.openMenuTaskId = null;\n      this.removeClickListener();\n    } else {\n      this.openMenuTaskId = id;\n      setTimeout(() => this.addClickListener(), 0);\n    }\n  }\n  closeRowMenu(event) {\n    event.preventDefault();\n    this.openMenuTaskId = null;\n    this.removeClickListener();\n  }\n  addClickListener() {\n    if (this.clickListener) return;\n    const handler = event => {\n      const menu = document.querySelector('.slds-dropdown-trigger.slds-is-open');\n      if (!menu) return;\n      const target = event.target;\n      if (!menu.contains(target)) {\n        this.openMenuTaskId = null;\n        this.removeClickListener();\n      }\n    };\n    document.addEventListener('mousedown', handler);\n    this.clickListener = () => document.removeEventListener('mousedown', handler);\n  }\n  removeClickListener() {\n    if (this.clickListener) {\n      this.clickListener();\n      this.clickListener = null;\n    }\n  }\n  confirmDelete(yes) {\n    if (yes && this.selectedTask) {\n      this.taskService.delete(this.selectedTask.id).subscribe();\n    }\n    this.showDeleteConfirm = false;\n    this.selectedTask = null;\n  }\n  toggleComplete(task) {\n    this.taskService.toggleComplete(task.id).subscribe();\n  }\n  get filteredTasks() {\n    const q = this.searchTerm.trim().toLowerCase();\n    let list = this.tasks;\n    if (q) {\n      list = list.filter(t => (t.assignedTo || '').toLowerCase().includes(q));\n    }\n    return list;\n  }\n  get totalPages() {\n    return Math.max(1, Math.ceil(this.filteredTasks.length / this.pageSize));\n  }\n  get pagedTasks() {\n    const start = (this.page - 1) * this.pageSize;\n    return this.filteredTasks.slice(start, start + this.pageSize);\n  }\n  goToPage(p) {\n    if (p < 1) p = 1;\n    if (p > this.totalPages) p = this.totalPages;\n    this.page = p;\n  }\n};\nTaskListComponent = __decorate([Component({\n  selector: 'app-task-list',\n  templateUrl: './task-list.component.html',\n  styleUrls: ['./task-list.component.scss']\n})], TaskListComponent);\nexport { TaskListComponent };","map":{"version":3,"names":["Component","TaskListComponent","constructor","taskService","router","tasks","searchTerm","page","pageSize","showFormModal","selectedTask","showDeleteConfirm","taskToDelete","openMenuTaskId","clickListener","ngOnInit","subscription","getAll","subscribe","list","totalPages","ngOnDestroy","unsubscribe","removeClickListener","openNew","openEdit","task","onSaved","onClosed","openDeleteConfirm","toggleRowMenu","id","setTimeout","addClickListener","closeRowMenu","event","preventDefault","handler","menu","document","querySelector","target","contains","addEventListener","removeEventListener","confirmDelete","yes","delete","toggleComplete","filteredTasks","q","trim","toLowerCase","filter","t","assignedTo","includes","Math","max","ceil","length","pagedTasks","start","slice","goToPage","p","__decorate","selector","templateUrl","styleUrls"],"sources":["E:\\TEJASWINI\\Angular To-Do-List\\ng-training-assignment-1\\src\\app\\components\\task-list\\task-list.component.ts"],"sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { Task } from '../../models/task.model';\r\nimport { TaskService } from '../../services/task.service';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-task-list',\r\n  templateUrl: './task-list.component.html',\r\n  styleUrls: ['./task-list.component.scss']\r\n})\r\nexport class TaskListComponent implements OnInit, OnDestroy {\r\n  tasks: Task[] = [];\r\n  subscription!: Subscription;\r\n\r\n  // UI state\r\n  searchTerm = '';\r\n  page = 1;\r\n  pageSize = 20;\r\n  showFormModal = false;\r\n  selectedTask: Task | null = null;\r\n  showDeleteConfirm = false;\r\n  taskToDelete: Task | null = null;\r\n  // track which row's action menu is open (task id)\r\n  openMenuTaskId: string | null = null;\r\n  private clickListener: (() => void) | null = null;\r\n\r\n  constructor(public taskService: TaskService, private router: Router) {}\r\n\r\n  ngOnInit(): void {\r\n    this.subscription = this.taskService.getAll().subscribe(list => {\r\n      this.tasks = list;\r\n      if (this.page > this.totalPages) this.page = this.totalPages || 1;\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.subscription?.unsubscribe();\r\n    this.removeClickListener();\r\n  }\r\n\r\n  openNew() {\r\n    this.selectedTask = null;\r\n    this.showFormModal = true;\r\n  }\r\n\r\n  openEdit(task: Task) {\r\n    this.selectedTask = task;\r\n    this.showFormModal = true;\r\n    this.openMenuTaskId = null;\r\n  }\r\n\r\n  onSaved(task: Task) {\r\n    this.showFormModal = false;\r\n    this.selectedTask = null;\r\n  }\r\n\r\n  onClosed() {\r\n    this.showFormModal = false;\r\n    this.selectedTask = null;\r\n  }\r\n\r\n  openDeleteConfirm(task: Task) {\r\n    this.selectedTask = task;\r\n    this.showDeleteConfirm = true;\r\n    this.openMenuTaskId = null;\r\n  }\r\n\r\n  toggleRowMenu(id: string) {\r\n    if (this.openMenuTaskId === id) {\r\n      this.openMenuTaskId = null;\r\n      this.removeClickListener();\r\n    } else {\r\n      this.openMenuTaskId = id;\r\n      setTimeout(() => this.addClickListener(), 0);\r\n    }\r\n  }\r\n\r\n  closeRowMenu(event: Event) {\r\n    event.preventDefault();\r\n    this.openMenuTaskId = null;\r\n    this.removeClickListener();\r\n  }\r\n  private addClickListener() {\r\n    if (this.clickListener) return;\r\n    const handler = (event: MouseEvent) => {\r\n      const menu = document.querySelector('.slds-dropdown-trigger.slds-is-open');\r\n      if (!menu) return;\r\n      const target = event.target as HTMLElement;\r\n      if (!menu.contains(target)) {\r\n        this.openMenuTaskId = null;\r\n        this.removeClickListener();\r\n      }\r\n    };\r\n    document.addEventListener('mousedown', handler);\r\n    this.clickListener = () => document.removeEventListener('mousedown', handler);\r\n  }\r\n\r\n  private removeClickListener() {\r\n    if (this.clickListener) {\r\n      this.clickListener();\r\n      this.clickListener = null;\r\n    }\r\n  }\r\n\r\n  confirmDelete(yes: boolean) {\r\n    if (yes && this.selectedTask) {\r\n      this.taskService.delete(this.selectedTask.id).subscribe();\r\n    }\r\n    this.showDeleteConfirm = false;\r\n    this.selectedTask = null;\r\n  }\r\n\r\n  toggleComplete(task: Task) {\r\n    this.taskService.toggleComplete(task.id).subscribe();\r\n  }\r\n\r\n  get filteredTasks(): Task[] {\r\n    const q = this.searchTerm.trim().toLowerCase();\r\n    let list = this.tasks;\r\n    if (q) {\r\n      list = list.filter(t =>\r\n        (t.assignedTo || '').toLowerCase().includes(q)\r\n      );\r\n    }\r\n    return list;\r\n  }\r\n\r\n  get totalPages(): number {\r\n    return Math.max(1, Math.ceil(this.filteredTasks.length / this.pageSize));\r\n  }\r\n\r\n  get pagedTasks(): Task[] {\r\n    const start = (this.page - 1) * this.pageSize;\r\n    return this.filteredTasks.slice(start, start + this.pageSize);\r\n  }\r\n\r\n  goToPage(p: number) {\r\n    if (p < 1) p = 1;\r\n    if (p > this.totalPages) p = this.totalPages;\r\n    this.page = p;\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}