{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, Input, Output, EventEmitter } from '@angular/core';\nimport { Validators } from '@angular/forms';\nlet TaskFormComponent = class TaskFormComponent {\n  get isEdit() {\n    return !!this.task;\n  }\n  constructor(fb, taskService) {\n    this.fb = fb;\n    this.taskService = taskService;\n    this.task = null; // if provided, form is edit\n    this.saved = new EventEmitter();\n    this.closed = new EventEmitter();\n    this.users = [];\n    this.statuses = [];\n    this.priorities = [];\n  }\n  ngOnInit() {\n    this.taskForm = this.fb.group({\n      description: [''],\n      dueDate: [''],\n      assignedTo: ['', Validators.required],\n      status: ['Not Started', Validators.required],\n      priority: ['Normal', Validators.required]\n    });\n    this.taskService.getUsers().subscribe(list => this.users = list);\n    this.taskService.getStatuses().subscribe(list => this.statuses = list);\n    this.taskService.getPriorities().subscribe(list => this.priorities = list);\n    if (this.task) {\n      this.patchForm(this.task);\n    }\n  }\n  ngOnChanges(changes) {\n    if (changes['task'] && this.taskForm) {\n      if (this.task) this.patchForm(this.task);else this.taskForm.reset({\n        status: 'Not Started',\n        priority: 'Normal',\n        completed: false\n      });\n    }\n  }\n  patchForm(t) {\n    this.taskForm.patchValue({\n      description: t.description,\n      dueDate: t.dueDate ? t.dueDate.split('T')[0] : '',\n      assignedTo: t.assignedTo || '',\n      status: t.status || 'Not Started',\n      priority: t.priority || 'Normal'\n    });\n  }\n  onSubmit() {\n    if (this.taskForm.invalid) {\n      this.taskForm.markAllAsTouched();\n      return;\n    }\n    const f = this.taskForm.value;\n    const payload = {\n      description: f.description,\n      dueDate: f.dueDate ? new Date(f.dueDate).toISOString() : undefined,\n      assignedTo: f.assignedTo,\n      status: f.status,\n      priority: f.priority\n    };\n    if (this.task && this.task.id) {\n      this.taskService.update(this.task.id, payload).subscribe(updated => {\n        if (updated) this.saved.emit(updated);\n      });\n    } else {\n      this.taskService.create(payload).subscribe(created => this.saved.emit(created));\n    }\n  }\n  onCancel() {\n    this.closed.emit();\n  }\n};\n__decorate([Input()], TaskFormComponent.prototype, \"task\", void 0);\n__decorate([Output()], TaskFormComponent.prototype, \"saved\", void 0);\n__decorate([Output()], TaskFormComponent.prototype, \"closed\", void 0);\nTaskFormComponent = __decorate([Component({\n  selector: 'app-task-form',\n  templateUrl: './task-form.component.html',\n  styleUrls: ['./task-form.component.scss']\n})], TaskFormComponent);\nexport { TaskFormComponent };","map":{"version":3,"names":["Component","Input","Output","EventEmitter","Validators","TaskFormComponent","isEdit","task","constructor","fb","taskService","saved","closed","users","statuses","priorities","ngOnInit","taskForm","group","description","dueDate","assignedTo","required","status","priority","getUsers","subscribe","list","getStatuses","getPriorities","patchForm","ngOnChanges","changes","reset","completed","t","patchValue","split","onSubmit","invalid","markAllAsTouched","f","value","payload","Date","toISOString","undefined","id","update","updated","emit","create","created","onCancel","__decorate","selector","templateUrl","styleUrls"],"sources":["E:\\TEJASWINI\\Angular To-Do-List\\ng-training-assignment-1\\src\\app\\components\\task-form\\task-form.component.ts"],"sourcesContent":["import { Component, OnInit, Input, Output, EventEmitter, OnChanges, SimpleChanges } from '@angular/core';\r\nimport { Task } from '../../models/task.model';\r\nimport { TaskService } from '../../services/task.service';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'app-task-form',\r\n  templateUrl: './task-form.component.html',\r\n  styleUrls: ['./task-form.component.scss']\r\n})\r\nexport class TaskFormComponent implements OnInit, OnChanges {\r\n  @Input() task?: Task | null = null; // if provided, form is edit\r\n  @Output() saved = new EventEmitter<Task>();\r\n  @Output() closed = new EventEmitter<void>();\r\n\r\n  taskForm!: FormGroup;\r\n  users: string[] = [];\r\n  statuses: string[] = [];\r\n  priorities: string[] = [];\r\n  \r\n  get isEdit(): boolean {\r\n    return !!this.task;\r\n  }\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private taskService: TaskService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.taskForm = this.fb.group({\r\n      description: [''],\r\n      dueDate: [''],\r\n      assignedTo: ['',Validators.required],\r\n      status: ['Not Started', Validators.required],\r\n      priority: ['Normal', Validators.required],\r\n    });\r\n\r\n    this.taskService.getUsers().subscribe(list => this.users = list);\r\n    this.taskService.getStatuses().subscribe(list => this.statuses = list);\r\n    this.taskService.getPriorities().subscribe(list => this.priorities = list);\r\n\r\n    if (this.task) {\r\n      this.patchForm(this.task);\r\n    }\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if (changes['task'] && this.taskForm) {\r\n      if (this.task) this.patchForm(this.task);\r\n      else this.taskForm.reset({ status: 'Not Started', priority: 'Normal', completed: false });\r\n    }\r\n  }\r\n\r\n  private patchForm(t: Task) {\r\n    this.taskForm.patchValue({\r\n      description: t.description,\r\n      dueDate: t.dueDate ? t.dueDate.split('T')[0] : '',\r\n      assignedTo: t.assignedTo || '',\r\n      status: t.status || 'Not Started',\r\n      priority: t.priority || 'Normal',\r\n    });\r\n  }\r\n\r\n  onSubmit() {\r\n  if (this.taskForm.invalid) {\r\n    this.taskForm.markAllAsTouched();\r\n    return; \r\n  }\r\n\r\n  const f = this.taskForm.value;\r\n  const payload: Partial<Task> = {\r\n    description: f.description,\r\n    dueDate: f.dueDate ? new Date(f.dueDate).toISOString() : undefined,\r\n    assignedTo: f.assignedTo,\r\n    status: f.status,\r\n    priority: f.priority,\r\n  };\r\n\r\n  if (this.task && this.task.id) {\r\n    this.taskService.update(this.task.id, payload).subscribe(updated => {\r\n      if (updated) this.saved.emit(updated);\r\n    });\r\n  } else {\r\n    this.taskService.create(payload).subscribe(created => this.saved.emit(created));\r\n  }\r\n}\r\n\r\n  onCancel() {\r\n    this.closed.emit();\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}